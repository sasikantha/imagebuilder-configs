name: WebServerComponent
description: Install and configure Apache web server
schemaVersion: 1.0

phases:
  - name: build
    steps:
      - name: UpdateSystem
        action: ExecuteBash
        inputs:
          commands:
            - yum update -y
            
      - name: InstallApache
        action: ExecuteBash
        inputs:
          commands:
            - yum install -y httpd
            - systemctl enable httpd
            
      - name: CreateWebContent
        action: ExecuteBash
        inputs:
          commands:
            - 'echo "<h1>Web Server v1.0</h1>" > /var/www/html/index.html'
            - 'echo "<p>Built with Image Builder</p>" >> /var/www/html/index.html'
            
  - name: test
    steps:
      - name: TestApache
        action: ExecuteBash
        inputs:
          commands:
            - systemctl status httpd
            - test -f /var/www/html/index.html
